var express = require('express');

module.exports.Router = function(SlideShow) {
  return express.Router()    .get('/', function(req, res, next) {      SlideShow.find({ author: req.user.username }, function(err, slideShows) {        res.json(slideShows);      });    })    .get('/:slidename', function(req, res, next) {      SlideShow.findOne({        author: req.user.username,        slideName: req.params.slidename      }, function(err, slideshows) {        res.json(slideshows);      });    })    .post('/:slidename', function(req, res, next) {      SlideShow.findOne({        author: req.user.username,        slideName: req.params.slidename      }, function(err, slideshows) {        if(err) return res.json({success: false});        if(slideshows) {          slideshows.slides = req.body.slides;          slideshows.save();        } else {          new SlideShow({            author: req.user.username,            date: new Date(),            slideName: req.params.slidename,            slides: req.body.slides          }).save();        }        res.json({success: true});      });    })    .delete('/:slidename', function(req, res, next) {      SlideShow.findOneAndRemove({        author: req.user.username,        slideName: req.params.slidename      }, function(err, slideshows) {        if(err) return res.json({success: false});        res.json({success: true});      });    });};