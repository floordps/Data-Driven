var express = require('express');

module.exports.Router = function(SlideShow) {
  return express.Router()    .get('/all', function(req, res, next) {      SlideShow.find({}, function(err, slideShows) {        res.json(slideShows);      });    })    .get('/:username', function(req, res, next) {      SlideShow.find({ username: req.params.username }, function(err, slideShows) {        if(!req.isAuthenticated()) {          slideShows.forEach(function(obj) {            obj.token = undefined;            delete obj.token;          });        }        res.json(slideShows);      });    })    .get('/:username/:slidename', function(req, res, next) {      SlideShow.findOne({        username: req.params.username,        slideName: req.params.slidename      }, function(err, slideShow) {        if(!req.isAuthenticated()) {          slideShow.token = undefined;          delete slideShow.token;        }        res.json(slideShow);      });    });};